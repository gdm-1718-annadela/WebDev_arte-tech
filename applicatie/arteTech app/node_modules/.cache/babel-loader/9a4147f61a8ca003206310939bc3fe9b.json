{"ast":null,"code":"import _slicedToArray from \"/Users/annadelanghe/Documents/school/CMSDev/Eindwerk1920/applicatie/arteTech app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/annadelanghe/Documents/school/CMSDev/Eindwerk1920/applicatie/arteTech app/src/views/Task.jsx\";\nimport React, { useState, useEffect, Component } from 'react';\nimport { BrowserRouter as Router, Switch, Route, Link, Redirect } from \"react-router-dom\";\nimport './../css/taak.css';\nimport './../css/general.css';\nexport default function Taak() {\n  const token = localStorage.getItem('token');\n\n  const _useState = useState(\"\"),\n        _useState2 = _slicedToArray(_useState, 2),\n        clientName = _useState2[0],\n        setClientName = _useState2[1];\n\n  const _useState3 = useState(\"\"),\n        _useState4 = _slicedToArray(_useState3, 2),\n        taskName = _useState4[0],\n        setTaskName = _useState4[1];\n\n  const _useState5 = useState(\"\"),\n        _useState6 = _slicedToArray(_useState5, 2),\n        date = _useState6[0],\n        setDate = _useState6[1];\n\n  const _useState7 = useState(\"\"),\n        _useState8 = _slicedToArray(_useState7, 2),\n        startTime = _useState8[0],\n        setStartTime = _useState8[1];\n\n  const _useState9 = useState(\"\"),\n        _useState10 = _slicedToArray(_useState9, 2),\n        finalTime = _useState10[0],\n        setFinalTime = _useState10[1];\n\n  const _useState11 = useState(\"\"),\n        _useState12 = _slicedToArray(_useState11, 2),\n        breakTime = _useState12[0],\n        setBreakTime = _useState12[1];\n\n  const _useState13 = useState(\"\"),\n        _useState14 = _slicedToArray(_useState13, 2),\n        executed = _useState14[0],\n        setExecuted = _useState14[1];\n\n  const _useState15 = useState(\"\"),\n        _useState16 = _slicedToArray(_useState15, 2),\n        used = _useState16[0],\n        setUsed = _useState16[1];\n\n  const _useState17 = useState(\"\"),\n        _useState18 = _slicedToArray(_useState17, 2),\n        transport = _useState18[0],\n        setTransport = _useState18[1];\n\n  let options = [];\n\n  function getClients() {\n    fetch('http://localhost:8888/web/jsonapi/user/user', {\n      method: \"GET\",\n      headers: {\n        'Content-Type': 'application/vnd.api+json',\n        'Accept': 'application/x-www-form-urlencoded',\n        'Authorization': 'Bearer ' + token\n      }\n    }).then(response => {\n      return response.json();\n    }).then(data => {\n      for (let i = 0; i < data.data.length; i++) {\n        let roles = data.data[i].relationships;\n\n        if (roles) {\n          let rolesId = roles.roles.data[0].id;\n\n          if (rolesId == \"5cf72a3c-f224-4234-aad8-0bb78c1c56cc\") {\n            let nameClient = data.data[i].attributes.name;\n            options.push(nameClient);\n          }\n        }\n\n        localStorage.setItem('clients', JSON.stringify(options));\n      }\n    });\n  }\n\n  getClients();\n\n  function timeToSeconds(time, whatTime) {\n    let splittedTime = time.split(\":\");\n    let hour = splittedTime[0] * 3600;\n    let min = splittedTime[1] * 60;\n    let seconds = hour + min;\n\n    if (whatTime == \"starttime\") {\n      setStartTime(seconds);\n    } else if (whatTime == \"finaltime\") {\n      setFinalTime(seconds);\n    }\n  }\n\n  const handleSubmit = () => {\n    let client = document.getElementById(\"clientName\");\n    let strUser = client.options[client.selectedIndex].value;\n    {\n      setClientName(strUser);\n    }\n    timeToSeconds(startTime, \"starttime\");\n    timeToSeconds(finalTime, \"finaltime\");\n  };\n\n  if (clientName == \"\") {\n    console.log(\"oops\");\n  } else {\n    console.log(clientName);\n    console.log(\"yeey !!!\");\n    getTaskData();\n    return React.createElement(Redirect, {\n      to: \"/login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    });\n  }\n\n  function getTaskData() {\n    fetch('http://localhost:8888/web/jsonapi/node/taak', {\n      method: \"POST\",\n      headers: {\n        'Content-Type': 'application/vnd.api+json',\n        'Accept': 'application/x-www-form-urlencoded',\n        'Authorization': 'Bearer ' + token,\n        'X-CSRF-Token': 'KTpytkazFcgdgLqK33HpYx4YFb3w3a5olURFx2uAEXs'\n      },\n      body: JSON.stringify({\n        \"data\": {\n          \"type\": \"node--taak\",\n          \"attributes\": {\n            \"title\": taskName,\n            \"field_klant\": clientName,\n            \"field_datum\": date,\n            \"field_startuur\": startTime,\n            \"field_einduur\": finalTime,\n            \"field_pauze\": breakTime,\n            \"field_uitgevoerde_activiteiten\": executed,\n            \"field_materialen\": used,\n            \"field_transport\": transport\n          },\n          \"relationships\": {\n            \"field_test\": {\n              \"data\": {\n                \"type\": \"user--user\",\n                \"id\": \"1911bb31-c14f-4cc1-90a3-994db5e4a59c\"\n              }\n            }\n          }\n        }\n      })\n    }).then(response => {\n      return response.json();\n    }).then(data => {\n      console.log(data);\n    });\n  }\n\n  if (localStorage.getItem(\"clients\")) {\n    let klanten = JSON.parse(localStorage.getItem('clients'));\n    return React.createElement(\"div\", {\n      className: \"body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, \"Vul in\"), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \"Klant\"), React.createElement(\"select\", {\n      className: \"boxshadow\",\n      id: \"clientName\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, klanten.map(function (option) {\n      return React.createElement(\"option\", {\n        key: option,\n        value: option,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, option);\n    })), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, \"Taak\"), React.createElement(\"input\", {\n      className: \"input\",\n      name: \"taskName\",\n      type: \"text\",\n      onChange: e => setTaskName(e.target.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, \"Datum\"), React.createElement(\"input\", {\n      className: \"input\",\n      name: \"date\",\n      type: \"date\",\n      onChange: e => setDate(e.target.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, \"Gestart om\"), React.createElement(\"input\", {\n      className: \"input\",\n      name: \"startTime\",\n      type: \"time\",\n      onChange: e => setStartTime(e.target.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, \"Gestopt om\"), React.createElement(\"input\", {\n      className: \"input\",\n      name: \"finalTime\",\n      type: \"time\",\n      onChange: e => setFinalTime(e.target.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, \"Pauze tijd in minuten\"), React.createElement(\"input\", {\n      className: \"input\",\n      name: \"breakTime\",\n      type: \"number\",\n      onChange: e => setBreakTime(e.target.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, \"Uitgevoerde activiteit(en)\"), React.createElement(\"input\", {\n      className: \"input\",\n      name: \"executed\",\n      type: \"textarea\",\n      onChange: e => setExecuted(e.target.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, \"Gebruikt materiaal\"), React.createElement(\"input\", {\n      className: \"input\",\n      name: \"used\",\n      type: \"textarea\",\n      onChange: e => setUsed(e.target.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, \"Transport in km\"), React.createElement(\"input\", {\n      className: \"input\",\n      name: \"transport\",\n      type: \"number\",\n      onChange: e => setTransport(e.target.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"btnColor\",\n      onClick: handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, \"Plaats Taak\"));\n  } else {\n    localStorage.getItem('clients');\n    return React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, \"Hi\");\n  }\n}","map":{"version":3,"sources":["/Users/annadelanghe/Documents/school/CMSDev/Eindwerk1920/applicatie/arteTech app/src/views/Task.jsx"],"names":["React","useState","useEffect","Component","BrowserRouter","Router","Switch","Route","Link","Redirect","Taak","token","localStorage","getItem","clientName","setClientName","taskName","setTaskName","date","setDate","startTime","setStartTime","finalTime","setFinalTime","breakTime","setBreakTime","executed","setExecuted","used","setUsed","transport","setTransport","options","getClients","fetch","method","headers","then","response","json","data","i","length","roles","relationships","rolesId","id","nameClient","attributes","name","push","setItem","JSON","stringify","timeToSeconds","time","whatTime","splittedTime","split","hour","min","seconds","handleSubmit","client","document","getElementById","strUser","selectedIndex","value","console","log","getTaskData","body","klanten","parse","map","option","e","target"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, Component} from 'react';\n\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link,\n  Redirect\n} from \"react-router-dom\";\n\nimport './../css/taak.css';\nimport './../css/general.css';\n\nexport default function Taak () {\n  const token = localStorage.getItem('token')\n  const [clientName, setClientName] = useState(\"\")\n  const [taskName, setTaskName] = useState(\"\")\n  const [date, setDate] = useState(\"\")\n  const [startTime, setStartTime] = useState(\"\")\n  const [finalTime, setFinalTime] = useState(\"\")\n  const [breakTime, setBreakTime] = useState(\"\")\n  const [executed, setExecuted] = useState(\"\")\n  const [used, setUsed] = useState(\"\")\n  const [transport, setTransport] = useState(\"\")  \n\n  let options = []\n\n  function getClients (){\n    fetch('http://localhost:8888/web/jsonapi/user/user', {\n      method: \"GET\",\n      headers: {\n        'Content-Type': 'application/vnd.api+json',\n        'Accept': 'application/x-www-form-urlencoded',\n        'Authorization': 'Bearer ' +  token\n      },\n    }).then((response) => {\n      return response.json();\n    }).then((data)=> {\n      for(let i = 0; i < data.data.length ; i++){\n        let roles = data.data[i].relationships\n        if (roles){\n          let rolesId = roles.roles.data[0].id\n          if (rolesId == \"5cf72a3c-f224-4234-aad8-0bb78c1c56cc\"){\n            let nameClient = data.data[i].attributes.name\n            options.push(nameClient)\n          }\n        }\n        localStorage.setItem('clients', JSON.stringify(options))\n      }\n    })\n  }\n\n  getClients()\n\n\n\n  function timeToSeconds(time, whatTime){\n    let splittedTime = time.split(\":\")\n    let hour = splittedTime[0] * 3600\n    let min = splittedTime[1] * 60\n    let seconds = hour + min\n    if(whatTime == \"starttime\"){\n      setStartTime(seconds)\n    } else if(whatTime == \"finaltime\"){\n      setFinalTime(seconds)\n    }\n  }\n  \n  const handleSubmit = () => {\n    let client = document.getElementById(\"clientName\");\n    let strUser = client.options[client.selectedIndex].value;\n    {setClientName(strUser)}\n    timeToSeconds(startTime, \"starttime\")\n    timeToSeconds(finalTime, \"finaltime\")\n  }\n\n  if(clientName == \"\"){\n    console.log(\"oops\")\n  } else {\n    console.log(clientName)\n    console.log(\"yeey !!!\")\n    getTaskData()\n    return(<Redirect to='/login' />)\n  }\n\n\n  function getTaskData(){\n    fetch('http://localhost:8888/web/jsonapi/node/taak', {\n      method: \"POST\",\n      headers: {\n        'Content-Type': 'application/vnd.api+json',\n        'Accept': 'application/x-www-form-urlencoded',\n        'Authorization': 'Bearer ' +  token,\n        'X-CSRF-Token': 'KTpytkazFcgdgLqK33HpYx4YFb3w3a5olURFx2uAEXs'\n      },\n      body: JSON.stringify({\n              \"data\": {\n                \"type\": \"node--taak\",\n                \"attributes\": {\n                  \"title\": taskName,\n                  \"field_klant\": clientName,\n                  \"field_datum\": date,\n                  \"field_startuur\": startTime,\n                  \"field_einduur\": finalTime,\n                  \"field_pauze\": breakTime,\n                  \"field_uitgevoerde_activiteiten\": executed,\n                  \"field_materialen\": used,\n                  \"field_transport\": transport\n                },\n                \"relationships\": {\n                  \"field_test\": {\n                    \"data\": {\n                        \"type\": \"user--user\",\n                        \"id\": \"1911bb31-c14f-4cc1-90a3-994db5e4a59c\"\n                    },\n                  }\n                }\n              }\n            })\n    }).then((response) => {\n      return response.json();\n    }).then((data)=> {\n      console.log(data)      \n    })\n  }\n\n  if(localStorage.getItem(\"clients\")) {\n    let klanten = JSON.parse(localStorage.getItem('clients'))\n    return(\n      <div className=\"body\">\n        <h1>Vul in</h1>\n        <label>Klant</label>\n        <select className=\"boxshadow\" id=\"clientName\">\n        {\n                klanten.map(function (option) {\n                    return (<option key={option} value={option }>{option}</option>)\n                })\n            }\n        </select>\n        <label>Taak</label>\n        <input\n          className=\"input\"\n          name=\"taskName\"\n          type=\"text\"\n          onChange={(e) => setTaskName(e.target.value)}\n        />\n\n        <label>Datum</label>\n        <input\n          className=\"input\"\n          name=\"date\"\n          type=\"date\"\n          onChange={(e) => setDate(e.target.value)}\n        />\n        <label>Gestart om</label>\n        <input\n          className=\"input\"\n          name=\"startTime\"\n          type=\"time\"\n          onChange={(e) => setStartTime(e.target.value)}\n        />\n\n        <label>Gestopt om</label>\n        <input\n          className=\"input\"\n          name=\"finalTime\"\n          type=\"time\"\n          onChange={(e) => setFinalTime(e.target.value)}\n\n        />\n\n        <label>Pauze tijd in minuten</label>\n        <input\n          className=\"input\"\n          name=\"breakTime\"\n          type=\"number\"\n          onChange={(e) => setBreakTime(e.target.value)}\n        />\n\n        <label>Uitgevoerde activiteit(en)</label>\n        <input\n          className=\"input\"\n          name=\"executed\"\n          type=\"textarea\"\n          onChange={(e) => setExecuted(e.target.value)}\n        />\n\n        <label>Gebruikt materiaal</label>\n        <input\n          className=\"input\"\n          name=\"used\"\n          type=\"textarea\"\n          onChange={(e) => setUsed(e.target.value)}\n        />\n\n        <label>Transport in km</label>\n        <input\n          className=\"input\"\n          name=\"transport\"\n          type=\"number\"\n          onChange={(e) => setTransport(e.target.value)}\n        />\n        <button className=\"btnColor\" onClick={handleSubmit}>Plaats Taak</button>\n      </div>\n    )  \n  } else {\n    localStorage.getItem('clients')\n    return(<h1>Hi</h1>)\n  }    \n}"]},"metadata":{},"sourceType":"module"}